import asyncio
import os
import sys

# 将项目根目录加入 path，以便导入 utils
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), "../../..")))

from utils.voice import generate_voice_for_scripts

# 语音配置
VOICE = "zh-CN-XiaoxiaoNeural"
# 规范化输出路径：media/{book}/{lesson}/voice
OUTPUT_DIR = "media/sunzi/lesson02/voice"

# 第二课解说词 (基于《胜利大模型》PPT内容改编)
scripts = {
    # 封面
    "01_cover": "大家好！欢迎回到《我是小小谋略家》。今天我们要学孙子兵法第二课：胜利大模型。问题来了——谁是最后的赢家？准备好，我们开始！",
    
    # 赢家是有公式的
    "02_formula": "赢家是有公式的！孙武爷爷说：“经之以五事，校之以计……知之者胜。”意思是：胜利不是靠运气，也不是靠谁嗓门大。只要掌握“胜利公式”，不用打仗，也能大概知道谁会赢。真的假的？想一想：考试前，只要你复习得好，不用等发卷子，也能猜到自己大概率能考一百分，对不对？",
    
    # 胜利第一招：五颗宝石
    "03_five_gems": "那胜利公式里，第一招是什么呢？集齐“五颗宝石”！想要赢，先看看自己手里有没有这五样宝贝：第一，道——大家一条心，团结力量大；第二，天——天气好不好，时机对不对；第三，地——地盘熟不熟，有没有坑；第四，将——队长牛不牛，聪明不聪明，勇敢不勇敢，爱不爱护大家；第五，法——纪律严不严，大家听不听指挥，奖罚分不分明。",
    
    # 胜利第二招：七个PK
    "04_seven_pk": "接下来是胜利第二招：七个 PK 大战！光看自己还不够，还要和对手比一比。PK1，谁更得人心？也就是大家都支持谁。PK2，谁的队长更厉害？PK3，谁占了天时地利？比如顺风还是逆风。PK4，谁的队伍更听话？整齐还是乱糟糟。PK5，谁的装备更好？PK6，谁训练得更棒？天天练还是睡懒觉。PK7，谁奖罚更公平？赏罚分明还是乱发脾气。",
    
    # 算得准，才能赢
    "05_calculate": "最后，算得准，才能赢！孙武爷爷的秘密是：“多算胜，少算不胜。”意思是：如果你手里的宝石多，PK 赢的项目多，你就更可能赢；如果你什么都没有，PK 也全输了，你就更可能输。所以，下次比赛，比如拔河、跑步、下棋，先用这个公式算一算。要是算出来赢不了，就赶快去准备：多练习，找帮手，想办法，千万别硬着头皮上！",
    
    # 结尾
    "06_ending": "最后，小武给你出一个思考题：如果这周末你要参加跳绳比赛，怎么用“胜利大模型”来提高胜率？A：不管三七二十一，拼命跳！B：提前检查绳子、找个好天气、多练习。C：祈求老天保佑。快在评论区告诉小武你的选择吧！我们下节课见！"
}

if __name__ == "__main__":
    asyncio.run(generate_voice_for_scripts(scripts, OUTPUT_DIR, VOICE))

